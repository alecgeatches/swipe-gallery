!function(){"use strict";var e=window.wp.blocks,t=JSON.parse('{"apiVersion":2,"name":"alecg/swipe-gallery","title":"Swipe Gallery","icon":"screenoptions","category":"media","editorScript":"file:./build/index.js","editorStyle":"file:./css/editor.css","style":"file:./css/frontend.css","attributes":{"images":{"type":"array","default":[]}}}');function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i])}return e},l.apply(this,arguments)}var i=window.wp.element,a=window.wp.i18n,r=window.wp.blockEditor,n=window.wp.primitives,s=window.wp.components,o=e=>{const{image:t,index:l}=e;return 0!==t.url.indexOf("blob:")||t.id?(0,i.createElement)("figure",null,(0,i.createElement)("img",{src:t.url})):(0,i.createElement)("figure",{className:"swipe-gallery-item-loading"},(0,i.createElement)("img",{src:t.url}),(0,i.createElement)(s.Spinner,null))};const{name:c}=t;(0,e.registerBlockType)(c,{edit:e=>{var t;const{attributes:s,setAttributes:c,isSelected:d}=e,m=(0,r.useBlockProps)(),[p,u]=(0,i.useState)(null!==(t=s.images)&&void 0!==t?t:[]);function g(e){return 0===e.url.indexOf("blob:")&&!e.id}const w={allowedTypes:["image"],multiple:!0,onSelect:function(e){const t=lodash.uniqBy([...p,...e],(e=>e.id?e.id:e.url)).map((e=>({id:e.id,url:e.url})));console.log("allImages:",t),u(t);const l=t.filter((e=>!g(e)));c({images:l}),console.log("Set loadedImages to:",l)}};if(0===p.length)return(0,i.createElement)(n.View,m,(0,i.createElement)(r.MediaPlaceholder,l({},w,{labels:{title:(0,a.__)("Swipe Gallery","swipe-gallery"),instructions:(0,a.__)("Drag, upload, or select images to be displayed in the gallery.")}})));{const e=p.some(g);return(0,i.createElement)(n.View,m,(0,i.createElement)("div",{className:"swipe-gallery"},p.map(((e,t)=>(0,i.createElement)(o,{image:e,index:t})))),!d&&!e&&(0,i.createElement)("p",{className:"swipe-gallery-upload-text"},(0,a.__)("Add to swipe gallery...")),d&&!e&&(0,i.createElement)(r.MediaPlaceholder,l({},w,{className:"swipe-gallery-append-media-placeholder",isAppender:!0,labels:{instructions:!1,title:!1}})))}},save:e=>{var t;const l=r.useBlockProps.save(),{attributes:a}=e,s=null!==(t=a.images)&&void 0!==t?t:[];return(0,i.createElement)(n.View,l,(0,i.createElement)("ul",null,s.map((e=>(0,i.createElement)("li",null,(0,i.createElement)("div",{class:"swipe-gallery-media-item","data-id":e.id},e.id))))))}})}();